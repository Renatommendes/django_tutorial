<!DOCTYPE html>
<html>
<head>
    <title>Mapa com Google Maps</title>
    <script>
        function loadGoogleMapsScript(apiKey) {
            const script = document.createElement('script');
            script.src = `https://maps.googleapis.com/maps/api/js?key=${apiKey}&callback=initMap`;
            script.async = true;
            script.defer = true;
            document.head.appendChild(script);
        }

        function initMap() {
            var map = new google.maps.Map(document.getElementById('map'), {
                zoom: 5,
                center: { lat: -15.794229, lng: -47.882166 } // Centro aproximado do Brasil
            });

            // Resto do código para inicializar o mapa e adicionar marcadores
        }
    </script>
</head>
<body onload="loadGoogleMapsScript('{{ api_key }}')">
    <h1>Mapa com Estações</h1>
    <div id="map" style="height: 500px; width: 100%;"></div>
    <h2>Adicionar Novo Marcador</h2>
    <label for="latitude">Latitude:</label>
    <input type="text" id="latitude" name="latitude">
    <label for="longitude">Longitude:</label>
    <input type="text" id="longitude" name="longitude">
    <button id="add-marker">Adicionar Marcador</button>

    <h2>Estações Próximas</h2>
    <table border="1">
        <thead>
            <tr>
                <th>Nome Entidade</th>
                <th>Latitude</th>
                <th>Longitude</th>
                <th>Distância</th>
            </tr>
        </thead>
        <tbody id="estacoes-table-body">
            <!-- Linhas da tabela serão adicionadas dinamicamente aqui -->
        </tbody>
    </table>
</body>
</html>
